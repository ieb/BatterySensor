EESchema Schematic File Version 2
LIBS:power
LIBS:device
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:BatteryMonitorATTiny3224-cache
EELAYER 25 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 1
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L SP3485EN IC101
U 1 1 6293EE38
P 5250 4750
F 0 "IC101" H 5050 5000 40  0000 C CNN
F 1 "MAX3485E" H 5450 4500 40  0000 C CNN
F 2 "Housings_SOIC:SOIC-8_3.9x4.9mm_Pitch1.27mm" H 5250 4750 35  0000 C CIN
F 3 "" H 5250 4750 60  0000 C CNN
	1    5250 4750
	1    0    0    -1  
$EndComp
$Comp
L C C105
U 1 1 6293F7A8
P 2650 1050
F 0 "C105" H 2650 1150 40  0000 L CNN
F 1 "100nF" H 2656 965 40  0000 L CNN
F 2 "Capacitors_SMD:C_0805" H 2688 900 30  0001 C CNN
F 3 "" H 2650 1050 60  0000 C CNN
	1    2650 1050
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR02
U 1 1 6293F7F7
P 2000 1350
F 0 "#PWR02" H 2000 1350 30  0001 C CNN
F 1 "GND" H 2000 1280 30  0001 C CNN
F 2 "" H 2000 1350 60  0001 C CNN
F 3 "" H 2000 1350 60  0001 C CNN
	1    2000 1350
	1    0    0    -1  
$EndComp
Text GLabel 5400 4350 2    60   Input ~ 0
5v
$Comp
L GND #PWR04
U 1 1 6293FDCD
P 5250 5250
F 0 "#PWR04" H 5250 5250 30  0001 C CNN
F 1 "GND" H 5250 5180 30  0001 C CNN
F 2 "" H 5250 5250 60  0001 C CNN
F 3 "" H 5250 5250 60  0001 C CNN
	1    5250 5250
	1    0    0    -1  
$EndComp
Text GLabel 5800 4650 2    60   BiDi ~ 0
RS485-A
Text GLabel 5800 4850 2    60   BiDi ~ 0
RS485-B
$Comp
L C C106
U 1 1 6293FF59
P 7700 2850
F 0 "C106" H 7700 2950 40  0000 L CNN
F 1 "100nF" H 7706 2765 40  0000 L CNN
F 2 "Capacitors_SMD:C_0805" H 7738 2700 30  0001 C CNN
F 3 "" H 7700 2850 60  0000 C CNN
	1    7700 2850
	1    0    0    -1  
$EndComp
Text GLabel 4650 4750 0    60   Input ~ 0
TXEN
$Comp
L R R102
U 1 1 62940901
P 3950 6000
F 0 "R102" V 4030 6000 40  0000 C CNN
F 1 "22K" V 3957 6001 40  0000 C CNN
F 2 "Resistors_SMD:R_0805" V 3880 6000 30  0001 C CNN
F 3 "" H 3950 6000 30  0000 C CNN
	1    3950 6000
	1    0    0    -1  
$EndComp
$Comp
L R R103
U 1 1 62940976
P 3950 6650
F 0 "R103" V 4030 6650 40  0000 C CNN
F 1 "10K" V 3957 6651 40  0000 C CNN
F 2 "Resistors_SMD:R_0805" V 3880 6650 30  0001 C CNN
F 3 "" H 3950 6650 30  0000 C CNN
	1    3950 6650
	1    0    0    -1  
$EndComp
Text GLabel 4100 6300 2    60   Output ~ 0
BatSenseV
$Comp
L C C108
U 1 1 62940AA3
P 3700 6650
F 0 "C108" H 3700 6750 40  0000 L CNN
F 1 "C" H 3706 6565 40  0000 L CNN
F 2 "Capacitors_SMD:C_0805" H 3738 6500 30  0001 C CNN
F 3 "" H 3700 6650 60  0000 C CNN
	1    3700 6650
	1    0    0    -1  
$EndComp
Text GLabel 3100 5650 0    60   Input ~ 0
BatV+
$Comp
L GND #PWR05
U 1 1 62940FA6
P 3950 7250
F 0 "#PWR05" H 3950 7250 30  0001 C CNN
F 1 "GND" H 3950 7180 30  0001 C CNN
F 2 "" H 3950 7250 60  0001 C CNN
F 3 "" H 3950 7250 60  0001 C CNN
	1    3950 7250
	1    0    0    -1  
$EndComp
$Comp
L CONN_4 P101
U 1 1 62941286
P 1750 2350
F 0 "P101" V 1700 2350 50  0000 C CNN
F 1 "RS485" V 1800 2350 50  0000 C CNN
F 2 "Connect:bornier4" H 1750 2350 60  0001 C CNN
F 3 "" H 1750 2350 60  0001 C CNN
	1    1750 2350
	-1   0    0    1   
$EndComp
Text GLabel 2300 2300 2    60   BiDi ~ 0
RS485-A
Text GLabel 2300 2200 2    60   BiDi ~ 0
RS485-B
Text GLabel 2250 2400 2    60   Input ~ 0
Vin
$Comp
L GND #PWR06
U 1 1 629414AD
P 2350 2600
F 0 "#PWR06" H 2350 2600 30  0001 C CNN
F 1 "GND" H 2350 2530 30  0001 C CNN
F 2 "" H 2350 2600 60  0001 C CNN
F 3 "" H 2350 2600 60  0001 C CNN
	1    2350 2600
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR07
U 1 1 62941584
P 1850 3800
F 0 "#PWR07" H 1850 3800 30  0001 C CNN
F 1 "GND" H 1850 3730 30  0001 C CNN
F 2 "" H 1850 3800 60  0001 C CNN
F 3 "" H 1850 3800 60  0001 C CNN
	1    1850 3800
	1    0    0    -1  
$EndComp
Text GLabel 1400 3450 2    60   Output ~ 0
BatV+
Text GLabel 1450 3850 2    60   BiDi ~ 0
NTC
Text GLabel 1400 3650 2    60   Output ~ 0
RS+
Text GLabel 1400 3550 2    60   Output ~ 0
RS-
$Comp
L R R104
U 1 1 629446B1
P 5300 6000
F 0 "R104" V 5380 6000 40  0000 C CNN
F 1 "10K" V 5307 6001 40  0000 C CNN
F 2 "Resistors_SMD:R_0805" V 5230 6000 30  0001 C CNN
F 3 "" H 5300 6000 30  0000 C CNN
	1    5300 6000
	1    0    0    -1  
$EndComp
Text GLabel 5100 5700 0    60   Input ~ 0
5v
Text GLabel 5500 6350 2    60   BiDi ~ 0
NTC
Text GLabel 4150 4600 0    60   Output ~ 0
RX
Text GLabel 4150 4900 0    60   Input ~ 0
TX
$Comp
L NCP1117ST50T3G U101
U 1 1 629BA07D
P 1500 750
F 0 "U101" H 1650 554 40  0000 C CNN
F 1 "AMS1117" H 1500 950 40  0000 C CNN
F 2 "TO_SOT_Packages_SMD:SOT-223-3Lead_TabPin2" H 1500 750 60  0001 C CNN
F 3 "" H 1500 750 60  0000 C CNN
	1    1500 750 
	1    0    0    -1  
$EndComp
Text GLabel 750  700  0    60   Input ~ 0
Vin
$Comp
L GND #PWR08
U 1 1 629BA2E3
P 1500 1100
F 0 "#PWR08" H 1500 1100 30  0001 C CNN
F 1 "GND" H 1500 1030 30  0001 C CNN
F 2 "" H 1500 1100 60  0001 C CNN
F 3 "" H 1500 1100 60  0001 C CNN
	1    1500 1100
	1    0    0    -1  
$EndComp
Text GLabel 3350 700  2    60   Output ~ 0
5v
$Comp
L C C101
U 1 1 629BA5E0
P 950 1000
F 0 "C101" H 950 1100 40  0000 L CNN
F 1 "10uF" H 956 915 40  0000 L CNN
F 2 "Capacitors_SMD:C_1206" H 988 850 30  0001 C CNN
F 3 "" H 950 1000 60  0000 C CNN
	1    950  1000
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR09
U 1 1 629BA92E
P 950 1300
F 0 "#PWR09" H 950 1300 30  0001 C CNN
F 1 "GND" H 950 1230 30  0001 C CNN
F 2 "" H 950 1300 60  0001 C CNN
F 3 "" H 950 1300 60  0001 C CNN
	1    950  1300
	1    0    0    -1  
$EndComp
$Comp
L C C104
U 1 1 629BB261
P 2000 1050
F 0 "C104" H 2000 1150 40  0000 L CNN
F 1 "10uF" H 2006 965 40  0000 L CNN
F 2 "Capacitors_SMD:C_1206" H 2038 900 30  0001 C CNN
F 3 "" H 2000 1050 60  0000 C CNN
	1    2000 1050
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR010
U 1 1 629BB58E
P 2650 1350
F 0 "#PWR010" H 2650 1350 30  0001 C CNN
F 1 "GND" H 2650 1280 30  0001 C CNN
F 2 "" H 2650 1350 60  0001 C CNN
F 3 "" H 2650 1350 60  0001 C CNN
	1    2650 1350
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR011
U 1 1 629BB5D8
P 7600 2600
F 0 "#PWR011" H 7600 2600 30  0001 C CNN
F 1 "GND" H 7600 2530 30  0001 C CNN
F 2 "" H 7600 2600 60  0001 C CNN
F 3 "" H 7600 2600 60  0001 C CNN
	1    7600 2600
	1    0    0    -1  
$EndComp
Text GLabel 1500 4700 2    60   BiDi ~ 0
UDPI
Text GLabel 1500 4800 2    60   Output ~ 0
5v
$Comp
L GND #PWR012
U 1 1 629CCA52
P 1500 5050
F 0 "#PWR012" H 1500 5050 30  0001 C CNN
F 1 "GND" H 1500 4980 30  0001 C CNN
F 2 "" H 1500 5050 60  0001 C CNN
F 3 "" H 1500 5050 60  0001 C CNN
	1    1500 5050
	1    0    0    -1  
$EndComp
$Comp
L C C107
U 1 1 629CD333
P 7450 2850
F 0 "C107" H 7450 2950 40  0000 L CNN
F 1 "1nF" H 7456 2765 40  0000 L CNN
F 2 "Capacitors_SMD:C_0805" H 7488 2700 30  0001 C CNN
F 3 "" H 7450 2850 60  0000 C CNN
	1    7450 2850
	1    0    0    -1  
$EndComp
Text Notes 1650 1550 0    60   ~ 0
Other Chips as required
$Comp
L ATTINY3224-SS IC102
U 1 1 629CEC36
P 8800 3800
F 0 "IC102" H 8050 4550 60  0000 C CNN
F 1 "ATTINY3224-SS" H 9350 3050 60  0000 C CNN
F 2 "Housings_SOIC:SOIC-14_3.9x8.7mm_Pitch1.27mm" H 8100 3050 60  0001 C CNN
F 3 "" H 8800 3800 60  0001 C CNN
	1    8800 3800
	1    0    0    -1  
$EndComp
Text GLabel 7550 3200 0    60   Input ~ 0
5v
$Comp
L GND #PWR013
U 1 1 629CEEE7
P 10200 3250
F 0 "#PWR013" H 10200 3250 30  0001 C CNN
F 1 "GND" H 10200 3180 30  0001 C CNN
F 2 "" H 10200 3250 60  0001 C CNN
F 3 "" H 10200 3250 60  0001 C CNN
	1    10200 3250
	1    0    0    -1  
$EndComp
Text GLabel 10050 3650 2    60   Output ~ 0
TX
Text GLabel 10050 3500 2    60   Input ~ 0
RX
Text GLabel 7550 3350 0    60   Output ~ 0
TXEN
Text GLabel 7500 3800 0    60   Input ~ 0
BatSenseV
Text GLabel 9950 3350 2    60   BiDi ~ 0
NTC
Text GLabel 7350 3950 0    60   Input ~ 0
RXDebug
Text GLabel 7350 4100 0    60   Output ~ 0
TXDebug
Text GLabel 10550 3800 2    60   BiDi ~ 0
UDPI
Text GLabel 10600 4700 2    60   BiDi ~ 0
SDA
Text GLabel 10600 4550 2    60   BiDi ~ 0
SCL
Text GLabel 10600 4850 2    60   BiDi ~ 0
SCL
$Comp
L CONN_5 P102
U 1 1 629D28E4
P 850 3650
F 0 "P102" V 800 3650 50  0000 C CNN
F 1 "Bat" V 900 3650 50  0000 C CNN
F 2 "Connect:bornier5" H 850 3650 60  0001 C CNN
F 3 "" H 850 3650 60  0001 C CNN
	1    850  3650
	-1   0    0    1   
$EndComp
Text GLabel 1500 4500 2    60   Output ~ 0
RXDebug
Text GLabel 1500 4600 2    60   Input ~ 0
TXDebug
$Comp
L CONN_5 P103
U 1 1 629DAFCB
P 900 4700
F 0 "P103" V 850 4700 50  0000 C CNN
F 1 "Prog" V 950 4700 50  0000 C CNN
F 2 "Pin_Headers:Pin_Header_Straight_1x05" H 900 4700 60  0001 C CNN
F 3 "" H 900 4700 60  0001 C CNN
	1    900  4700
	-1   0    0    1   
$EndComp
NoConn ~ 9950 4100
NoConn ~ 9950 3950
$Comp
L C C102
U 1 1 629DCB62
P 2350 1050
F 0 "C102" H 2350 1150 40  0000 L CNN
F 1 "100nF" H 2356 965 40  0000 L CNN
F 2 "Capacitors_SMD:C_0805" H 2388 900 30  0001 C CNN
F 3 "" H 2350 1050 60  0000 C CNN
	1    2350 1050
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR014
U 1 1 629DCBB3
P 2350 1400
F 0 "#PWR014" H 2350 1400 30  0001 C CNN
F 1 "GND" H 2350 1330 30  0001 C CNN
F 2 "" H 2350 1400 60  0001 C CNN
F 3 "" H 2350 1400 60  0001 C CNN
	1    2350 1400
	1    0    0    -1  
$EndComp
Text Notes 2250 3900 0    60   ~ 0
75mV == 100A
$Comp
L R R114
U 1 1 62AC3208
P 10250 3800
F 0 "R114" V 10330 3800 40  0000 C CNN
F 1 "270R" V 10257 3801 40  0000 C CNN
F 2 "Resistors_SMD:R_0805" V 10180 3800 30  0001 C CNN
F 3 "" H 10250 3800 30  0000 C CNN
	1    10250 3800
	0    -1   -1   0   
$EndComp
$Comp
L R R108
U 1 1 62AD8786
P 3500 5650
F 0 "R108" V 3580 5650 40  0000 C CNN
F 1 "10K" V 3507 5651 40  0000 C CNN
F 2 "Resistors_SMD:R_0805" V 3430 5650 30  0001 C CNN
F 3 "" H 3500 5650 30  0000 C CNN
	1    3500 5650
	0    1    1    0   
$EndComp
Text GLabel 7700 900  0    60   Input ~ 0
RS+
Text GLabel 7700 1800 0    60   Input ~ 0
RS-
$Comp
L C C109
U 1 1 62B00BE4
P 8700 1300
F 0 "C109" H 8700 1400 40  0000 L CNN
F 1 "100nF" H 8706 1215 40  0000 L CNN
F 2 "Capacitors_SMD:C_0805" H 8738 1150 30  0001 C CNN
F 3 "" H 8700 1300 60  0000 C CNN
	1    8700 1300
	-1   0    0    1   
$EndComp
Wire Wire Line
	5250 5250 5250 5100
Wire Wire Line
	5800 4650 5650 4650
Wire Wire Line
	5650 4850 5800 4850
Wire Wire Line
	4850 4700 4750 4700
Wire Wire Line
	4750 4700 4750 4750
Wire Wire Line
	4750 4750 4750 4800
Wire Wire Line
	4750 4800 4850 4800
Wire Wire Line
	4650 4750 4750 4750
Connection ~ 4750 4750
Wire Wire Line
	3950 6250 3950 6300
Wire Wire Line
	3950 6300 3950 6400
Wire Wire Line
	3700 6300 3950 6300
Wire Wire Line
	3950 6300 4100 6300
Connection ~ 3950 6300
Wire Wire Line
	3700 6300 3700 6450
Wire Wire Line
	3700 6850 3700 7100
Wire Wire Line
	3700 7100 3950 7100
Wire Wire Line
	3950 6900 3950 7100
Wire Wire Line
	3950 7100 3950 7250
Wire Wire Line
	3750 5650 3950 5650
Wire Wire Line
	3950 5650 3950 5750
Connection ~ 3950 7100
Wire Wire Line
	2300 2200 2100 2200
Wire Wire Line
	2100 2400 2250 2400
Wire Wire Line
	2100 2500 2350 2500
Wire Wire Line
	5100 5700 5300 5700
Wire Wire Line
	5300 5700 5300 5750
Wire Wire Line
	5500 6350 5300 6350
Wire Wire Line
	5300 6350 5300 6250
Wire Wire Line
	4150 4600 4850 4600
Wire Wire Line
	4150 4900 4850 4900
Wire Wire Line
	1500 1000 1500 1100
Wire Wire Line
	750  700  950  700 
Wire Wire Line
	950  700  1100 700 
Wire Wire Line
	1900 700  2000 700 
Wire Wire Line
	2000 700  2350 700 
Wire Wire Line
	2350 700  2650 700 
Wire Wire Line
	2650 700  3350 700 
Wire Wire Line
	950  800  950  700 
Connection ~ 950  700 
Wire Wire Line
	950  1200 950  1300
Wire Wire Line
	5400 4350 5250 4350
Wire Wire Line
	5250 4350 5250 4400
Wire Wire Line
	2350 850  2350 700 
Connection ~ 2350 700 
Wire Wire Line
	2650 700  2650 850 
Connection ~ 2650 700 
Wire Wire Line
	2350 1250 2350 1400
Wire Wire Line
	2650 1250 2650 1350
Wire Wire Line
	9850 3650 10050 3650
Wire Wire Line
	9850 3500 10050 3500
Wire Wire Line
	10200 3250 10200 3200
Wire Wire Line
	10200 3200 9850 3200
Wire Wire Line
	7550 3200 7700 3200
Wire Wire Line
	7700 3200 7750 3200
Wire Wire Line
	7750 3350 7550 3350
Wire Wire Line
	7500 3800 7750 3800
Wire Wire Line
	7350 3950 7750 3950
Wire Wire Line
	7350 4100 7750 4100
Wire Wire Line
	10000 3800 9850 3800
Wire Wire Line
	9950 3350 9850 3350
Wire Wire Line
	9950 3950 9850 3950
Wire Wire Line
	9950 4100 9850 4100
Wire Wire Line
	1450 3850 1250 3850
Wire Wire Line
	1400 3450 1250 3450
Wire Wire Line
	1400 3550 1250 3550
Wire Wire Line
	1250 3650 1400 3650
Wire Wire Line
	1250 3750 1850 3750
Wire Wire Line
	1500 4500 1300 4500
Wire Wire Line
	1500 4600 1300 4600
Wire Wire Line
	1500 4700 1300 4700
Wire Wire Line
	1500 4800 1300 4800
Wire Wire Line
	1300 4900 1500 4900
Wire Wire Line
	1500 4900 1500 5050
Wire Wire Line
	2000 850  2000 700 
Connection ~ 2000 700 
Wire Wire Line
	2000 1350 2000 1250
Wire Wire Line
	10500 3800 10550 3800
Wire Wire Line
	7700 3050 7700 3100
Wire Wire Line
	7700 3100 7700 3200
Connection ~ 7700 3200
Wire Wire Line
	7700 2450 7700 2650
Wire Wire Line
	7450 2450 7600 2450
Wire Wire Line
	7600 2450 7700 2450
Wire Wire Line
	7700 3100 7450 3100
Wire Wire Line
	7450 3100 7450 3050
Connection ~ 7700 3100
Wire Wire Line
	7450 2650 7450 2450
Wire Wire Line
	7600 2450 7600 2600
Connection ~ 7600 2450
Wire Wire Line
	3100 5650 3250 5650
Text GLabel 9050 900  2    60   Output ~ 0
Sense+
Text GLabel 9050 1800 2    60   Output ~ 0
Sense-
Text GLabel 7550 3500 0    60   Input ~ 0
Sense-
Text GLabel 7550 3650 0    60   Input ~ 0
Sense+
Wire Wire Line
	2100 2300 2300 2300
Wire Wire Line
	2350 2500 2350 2600
Wire Wire Line
	1850 3750 1850 3800
$Comp
L R R?
U 1 1 62B4153B
P 8200 1800
F 0 "R?" V 8280 1800 40  0000 C CNN
F 1 "10R" V 8207 1801 40  0000 C CNN
F 2 "Resistors_SMD:R_0805" V 8130 1800 30  0001 C CNN
F 3 "" H 8200 1800 30  0000 C CNN
	1    8200 1800
	0    1    1    0   
$EndComp
Wire Wire Line
	7700 1800 7950 1800
Wire Wire Line
	8450 1800 8700 1800
Wire Wire Line
	8700 1800 9050 1800
Wire Wire Line
	8700 1800 8700 1500
$Comp
L R R?
U 1 1 62B4179E
P 8250 900
F 0 "R?" V 8330 900 40  0000 C CNN
F 1 "10R" V 8257 901 40  0000 C CNN
F 2 "Resistors_SMD:R_0805" V 8180 900 30  0001 C CNN
F 3 "" H 8250 900 30  0000 C CNN
	1    8250 900 
	0    1    1    0   
$EndComp
Wire Wire Line
	7700 900  8000 900 
Wire Wire Line
	8500 900  8700 900 
Wire Wire Line
	8700 900  9050 900 
Wire Wire Line
	8700 900  8700 1100
Connection ~ 8700 900 
Connection ~ 8700 1800
Wire Wire Line
	7550 3500 7750 3500
Wire Wire Line
	7550 3650 7750 3650
$EndSCHEMATC
